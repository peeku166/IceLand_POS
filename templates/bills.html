{% extends 'base.html' %}
{% block title %}Bills - Ice Land{% endblock %}
{% block content %}
<div class="report-container">
    <h2>Bill Search</h2>
    <form method="get" class="no-print">
        <input type="text" name="q" placeholder="Bill No (e.g. IL00005)" value="{{ q or '' }}">
        <button type="submit">Search</button>
    </form>

    {% if bills %}
    <table class="report-table">
        <thead>
            <tr>
                <th>Date/Time</th>
                <th>Bill No</th>
                <th>Customer</th>
                <th>Amount (â‚¹)</th>
                <th>Status</th>
                <th>Staff</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for b in bills %}
            <tr>
                <td>{{ b.created_at.strftime('%d-%m-%Y %H:%M') }}</td>
                <td>{{ b.seq_code }}</td>
                <td>{{ b.customer_name or '-' }}</td>
                <td>{{ '%.2f' % b.total_amount }}</td>
                <td>{{ b.status }}</td>
                <td>{{ b.user.username if b.user else '-' }}</td>
                <td><a href="{{ url_for('admin_bill_detail', bill_id=b.id) }}">View</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No bills found.</p>
    {% endif %}
</div>
{% endblock %}
